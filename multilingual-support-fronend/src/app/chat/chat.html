<div class="chat-container">
  <textarea [(ngModel)]="message" placeholder="Type your message..."></textarea>
  <button (click)="sendMessage()">Send</button>

  <div *ngIf="response">
    <h3>Bot Response:</h3>
    <p>{{ response }}</p>

    <div class="meta-info">
      <p><strong>Detected Language:</strong> {{ detectedLanguage }}</p>
      <p><strong>Intent:</strong> {{ intent }}</p>
      <p>
        <strong>Confidence:</strong>
        <span>{{ confidence | number: '1.2-2' }}</span>
      </p>
      <div class="confidence-bar">
        <div class="confidence-fill" [style.width.%]="confidence * 100"></div>
      </div>

      <div *ngIf="explanation.length">
        <p><strong>Explanation:</strong></p>
        <p><b>Why this intent?</b></p>
        <div class="token-container">
          <span *ngFor="let t of explanation"
                class="token"
                [style.backgroundColor]="weightColor(t.weight)">
            {{ t.token }}
          </span>
        </div>
      </div>
    </div>
  </div>
</div>
